# -*- mode:python; coding:utf-8 -*-

server = TestBG('./Server.py --Ice.Config=../hello.cfg',
                cwd='$testdir', save_stdout=True, signal=2,
                post = FileContains('Hello World!'))

client = Test('./Client.py "$(head -1 %s)"' % server.stdout,
              cwd='$testdir', shell=True,
              pre = Poll(FileContains("hello1", server.stdout)))

TaskTerminator(server, delay=1)
